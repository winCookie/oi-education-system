# OI 互动教学系统 - 项目功能总结

> 专为信息学奥赛（OI）设计的全栈交互式教学系统
> 
> **技术栈**：React + NestJS + PostgreSQL + Docker
> 
> **项目状态**：✅ 已部署上线  
> **访问地址**：http://localhost

---

## 📊 系统概览

### 用户角色
- **管理员**（Admin）：系统最高权限
- **教师**（Teacher）：教学管理权限
- **学生**（Student）：学习和练习
- **家长**（Parent）：查看孩子学习情况
- **访客**（Guest）：基础浏览权限

---

## 🎯 核心功能模块

### 1️⃣ 用户系统与权限管理

#### 👤 用户认证
- ✅ 用户注册与登录
- ✅ JWT Token 认证机制
- ✅ Argon2 密码安全哈希
- ✅ 会话版本管理（支持强制下线）
- ✅ 登录失败锁定机制（防暴力破解）
- ✅ 个人资料管理

#### 👥 用户管理（教师/管理员）
- ✅ 批量创建学生账号
- ✅ 用户信息编辑
- ✅ 用户角色管理
- ✅ 用户状态查看

#### 👨‍👩‍👧‍👦 家长绑定系统
- ✅ 家长发起绑定请求（输入学生用户名）
- ✅ 学生收到绑定请求通知
- ✅ 学生接受/拒绝绑定
- ✅ 家长查看绑定状态
- ✅ 绑定关系管理（可解绑）

---

### 2️⃣ 知识库与教学资源

#### 📚 知识点管理
- ✅ **分组管理**：入门组 / 提高组
- ✅ **分类体系**：数据结构、图论、动态规划等
- ✅ **内容编辑**：支持 Markdown 格式
- ✅ **知识点搜索**：关键字快速查找
- ✅ **知识点浏览**：卡片式展示

#### 📝 题目管理
- ✅ 题目关联知识点
- ✅ 题目详情展示
- ✅ 题目分组管理

#### 🎥 视频资源
- ✅ 视频上传功能
- ✅ 视频在线播放
- ✅ 视频存储管理（uploads 目录）

---

### 3️⃣ 学生进度追踪

#### 📈 学习进度管理
- ✅ 学生完成知识点标记
- ✅ 学习进度统计
- ✅ 知识点完成状态查看

#### 📊 学生练习看板
- ✅ **可视化面板**：展示学生学习数据
- ✅ **进度统计**：完成率、学习时长等
- ✅ **家长可见**：家长可查看绑定学生的进度
- ✅ **教师可见**：教师可查看所有学生进度

---

### 4️⃣ 学情报告反馈系统 ⭐

#### 📝 教师创建报告
- ✅ **学员基本信息**
  - 选择学员（下拉列表）
  - 学员姓名
  - 阶段（基础/提高等）
  - 评估周期（开始-结束日期）
  - 组别（CSP-J / CSP-S / NOIP）

- ✅ **知识模块评估**（0-10分）
  - 动态添加/删除知识模块
  - 每个模块打分
  - 实时雷达图可视化

- ✅ **题目训练量统计**
  - 7个难度层级统计：
    - 入门
    - 普及-
    - 普及/提高-
    - 普及+/提高
    - 提高+/省选-
    - 省选/NOI-
    - NOI/NOI+/CTSC
  - 横向柱状图可视化

- ✅ **综合能力评估**（0-10分）
  - 7个维度评分：
    - 课堂专注度
    - 笔记工整&完整程度
    - 代码调试速度
    - 课堂积极性
    - 课堂纪律性
    - 课堂参与度
    - 实战代码质量
  - 雷达图可视化

- ✅ **教练评语**
  - 支持 Markdown 格式
  - 富文本渲染

#### 📤 报告管理
- ✅ 保存草稿（可多次编辑）
- ✅ 发送报告给学生和家长
- ✅ 编辑已有报告
- ✅ 删除报告
- ✅ 查看报告详情
- ✅ 报告状态管理（草稿/已发送）

#### 📬 学生/家长查看报告
- ✅ **学生视角**：查看自己的学情报告
- ✅ **家长视角**：查看绑定学生的所有报告
- ✅ **报告列表**：卡片式布局，清晰美观
- ✅ **报告详情**：
  - 雷达图展示（知识模块、综合能力）
  - 柱状图展示（训练量统计）
  - 分数卡片展示
  - Markdown 评语渲染
- ✅ **自动通知**：发送报告时自动通知学生和家长

#### 📊 数据可视化
- ✅ Chart.js + React-Chartjs-2 集成
- ✅ 雷达图（Radar Chart）
- ✅ 柱状图（Bar Chart）
- ✅ 响应式图表设计

---

### 5️⃣ 竞赛日程管理

#### 📅 日程安排
- ✅ **竞赛信息**：标题、描述、时间、地点、链接
- ✅ **列表视图**：按时间排序展示
- ✅ **日历视图** ⭐：
  - 月度日历展示
  - 事件色块标记
  - 自定义颜色
  - 点击查看详情
- ✅ **事件详情弹窗**：
  - 完整信息展示
  - 地点、链接跳转

#### 🎨 日程管理（教师/管理员）
- ✅ 创建竞赛日程
- ✅ 编辑日程信息
- ✅ 删除日程
- ✅ 自定义事件颜色

---

### 6️⃣ 通知中心 ⭐

#### 🔔 实时通知
- ✅ **通知类型**：
  - 🔗 家长绑定请求
  - 📄 学情报告发送
  - 🔔 系统通知

- ✅ **通知功能**：
  - 实时推送
  - 未读标记（红点提示）
  - 通知列表展示
  - 标记已读
  - 一键全部已读
  - 删除通知

- ✅ **交互操作**：
  - 绑定请求：接受/拒绝按钮
  - 点击通知跳转到相关页面

- ✅ **视觉优化**：
  - 动态图标（根据通知类型）
  - 颜色区分（成功/失败/待处理）
  - 圆形图标容器
  - 现代化UI设计

---

### 7️⃣ 交互式可视化工具

#### 🌲 线段树可视化
- ✅ 动态生成线段树结构
- ✅ D3.js 交互式图形
- ✅ 区间查询节点标记练习
- ✅ 节点交互高亮

#### ⏮️ 算法过程溯源
- ✅ 进度条控制算法执行
- ✅ 代码高亮同步
- ✅ 文字说明配合演示
- ✅ 动画回放功能

---

### 8️⃣ 导航与界面

#### 🧭 导航结构
- ✅ **顶部导航栏**：
  - 知识与交互
  - 其他
  - 管理后台（教师/管理员）
  - 通知中心
  - 个人中心

- ✅ **"其他"页面（选项卡式）**：
  - 学生练习看板（家长/教师/管理员）
  - 竞赛日程安排（所有用户）
  - 学情报告（学生/家长）

- ✅ **"管理后台"页面（选项卡式）**：
  - 教研管理（知识点、题目）
  - 成员管理（用户管理）
  - 学情报告（报告管理）

#### 🎨 界面设计
- ✅ TailwindCSS 响应式设计
- ✅ Lucide Icons 图标库
- ✅ 现代化 UI 风格
- ✅ 移动端适配
- ✅ 统一视觉语言

---

## 🔒 安全特性

### 认证与授权
- ✅ JWT Token 认证
- ✅ 基于角色的权限控制（RBAC）
- ✅ 请求拦截器自动添加 Token
- ✅ Token 过期自动跳转登录

### 密码安全
- ✅ Argon2 密码哈希（抗 GPU 破解）
- ✅ 登录失败次数限制
- ✅ 账号自动锁定机制

### 数据安全
- ✅ SQL 注入防护（TypeORM ORM）
- ✅ XSS 防护（React 自动转义）
- ✅ 会话版本管理（防止重放攻击）

---

## 🗄️ 数据库设计

### 数据表（9张）
1. **users** - 用户表
2. **knowledge_points** - 知识点表
3. **problems** - 题目表
4. **student_progress** - 学生进度表
5. **student_reports** - 学情报告表 ⭐
6. **contest_schedules** - 竞赛日程表
7. **notifications** - 通知表
8. **binding_requests** - 绑定请求表
9. **parent_student_relations** - 家长学生关系表

### 关系设计
- ✅ 用户 ↔ 学生进度（一对多）
- ✅ 知识点 ↔ 题目（一对多）
- ✅ 教师 ↔ 学情报告（一对多）
- ✅ 学生 ↔ 学情报告（一对多）
- ✅ 家长 ↔ 学生（多对多，通过关系表）
- ✅ 用户 ↔ 通知（一对多）

---

## 🏗️ 技术架构

### 后端技术栈
- **框架**：NestJS（TypeScript）
- **数据库**：PostgreSQL 15
- **ORM**：TypeORM
- **认证**：JWT + Passport
- **密码加密**：Argon2
- **API 风格**：RESTful API

### 前端技术栈
- **框架**：React 18 + TypeScript
- **路由**：React Router v6
- **样式**：TailwindCSS
- **HTTP 客户端**：Axios
- **图表库**：Chart.js + React-Chartjs-2
- **可视化**：D3.js
- **图标**：Lucide React
- **Markdown 渲染**：react-markdown

### 部署架构
- **容器化**：Docker + Docker Compose
- **Web 服务器**：Nginx（前端静态托管）
- **数据持久化**：Docker Volume（postgres_data）
- **端口分配**：
  - 前端：80（HTTP）
  - 后端：3000（API）
  - 数据库：5432（PostgreSQL）

---

## 📦 项目结构

```
oi-education-system/
├── backend/                    # 后端服务
│   ├── src/
│   │   ├── entities/          # 数据库实体（9个）
│   │   ├── modules/           # 业务模块
│   │   │   ├── auth/          # 认证模块
│   │   │   ├── users/         # 用户管理模块
│   │   │   ├── knowledge/     # 知识库模块
│   │   │   ├── progress/      # 进度追踪模块
│   │   │   ├── reports/       # 学情报告模块 ⭐
│   │   │   ├── schedule/      # 竞赛日程模块
│   │   │   └── notifications/ # 通知模块
│   │   ├── app.module.ts      # 根模块
│   │   └── main.ts            # 应用入口
│   ├── uploads/               # 上传文件存储
│   │   └── videos/            # 视频文件
│   ├── Dockerfile
│   └── package.json
│
├── frontend/                   # 前端应用
│   ├── src/
│   │   ├── pages/             # 页面组件（10个）
│   │   │   ├── Home.tsx
│   │   │   ├── Login.tsx
│   │   │   ├── KnowledgeCenter.tsx
│   │   │   ├── Others.tsx
│   │   │   ├── AdminCenter.tsx
│   │   │   └── ...
│   │   ├── components/        # 功能组件
│   │   │   ├── Layout/        # 布局组件
│   │   │   │   ├── Navbar.tsx
│   │   │   │   └── NotificationCenter.tsx
│   │   │   ├── Reports/       # 学情报告组件 ⭐
│   │   │   │   ├── ReportEditor.tsx
│   │   │   │   ├── ReportView.tsx
│   │   │   │   ├── TeacherReportsList.tsx
│   │   │   │   └── StudentReportsList.tsx
│   │   │   ├── Others/        # 其他功能组件
│   │   │   │   ├── StudentProgressDashboard.tsx
│   │   │   │   ├── ScheduleList.tsx
│   │   │   │   ├── ScheduleCalendar.tsx
│   │   │   │   └── ScheduleDetailModal.tsx
│   │   │   └── Visualizer/    # 可视化组件
│   │   │       └── SegmentTree.tsx
│   │   ├── api/
│   │   │   └── client.ts      # Axios 实例
│   │   ├── App.tsx            # 应用入口
│   │   └── index.css          # 全局样式
│   ├── Dockerfile
│   └── package.json
│
├── docker-compose.yml          # Docker 编排
├── .gitignore                 # Git 忽略配置
├── README.md                  # 项目说明
├── 学情报告系统功能说明.md
└── 导航结构优化说明.md
```

---

## 🚀 部署与运维

### 快速启动
```bash
# 进入项目目录
cd /Users/codewin/PythonWorkspace/oi-education-system

# 启动所有服务
docker compose up -d

# 查看服务状态
docker compose ps

# 查看日志
docker compose logs -f
```

### 常用命令
```bash
# 重新构建并启动
docker compose up -d --build

# 停止所有服务
docker compose down

# 重启服务
docker compose restart

# 单独重启前端
docker compose restart frontend

# 单独重启后端
docker compose restart backend
```

### 数据持久化
- ✅ PostgreSQL 数据存储在 Docker Volume
- ✅ 上传的视频文件挂载到主机目录
- ✅ 容器重启数据不丢失

---

## 📈 系统统计

### 功能模块数量
- **8 大核心模块**：用户、知识库、进度、报告、日程、通知、可视化、管理
- **9 个数据表**：完整的业务建模
- **7 个后端模块**：模块化架构
- **10 个前端页面**：覆盖所有业务场景
- **20+ 个组件**：高复用性设计

### 代码规模
- **后端**：NestJS + TypeORM，模块化开发
- **前端**：React + TypeScript，组件化开发
- **总计**：约 15,000+ 行代码

### 用户角色
- **5 种用户角色**：Admin / Teacher / Student / Parent / Guest
- **基于角色的权限控制**：RBAC
- **灵活的权限管理**：可扩展

---

## ✨ 特色亮点

### 1. 🎓 教学专注
- 针对信息学奥赛（OI）设计
- 分组教学（入门组/提高组）
- 知识点体系完整
- 学习进度可追踪

### 2. 📊 数据可视化
- 线段树交互式可视化
- 学情报告雷达图和柱状图
- 竞赛日程日历视图
- 学生进度仪表盘

### 3. 👨‍👩‍👧‍👦 家校联动
- 家长绑定学生账号
- 家长查看学生进度
- 家长接收学情报告
- 实时通知推送

### 4. 🔔 智能通知
- 动态图标和颜色
- 分类清晰（绑定/报告/系统）
- 交互式操作（接受/拒绝）
- 一键全部已读

### 5. 🎨 现代化设计
- TailwindCSS 响应式
- 移动端适配
- 渐变色设计
- 流畅动画效果

### 6. 🔒 安全可靠
- Argon2 密码加密
- JWT Token 认证
- 会话版本管理
- 登录失败锁定

### 7. 🚀 易于部署
- Docker 一键部署
- 环境隔离
- 容器编排
- 数据持久化

---

## 🎯 业务价值

### 对教师
- ✅ 高效管理学生账号
- ✅ 快速创建知识点和题目
- ✅ 可视化编写学情报告
- ✅ 实时追踪学生进度
- ✅ 统一管理竞赛日程

### 对学生
- ✅ 系统化学习知识点
- ✅ 交互式理解算法
- ✅ 查看个人学习进度
- ✅ 接收学情报告反馈
- ✅ 及时了解竞赛信息

### 对家长
- ✅ 绑定孩子账号
- ✅ 查看学习进度
- ✅ 接收学情报告
- ✅ 了解教学安排
- ✅ 参与教学互动

### 对机构
- ✅ 提升教学质量
- ✅ 增强家校沟通
- ✅ 规范化教学管理
- ✅ 数据化决策支持
- ✅ 品牌形象提升

---

## 🔮 未来规划

### 短期优化（1-2周）
- [ ] 学情报告导出图片功能
- [ ] 学情报告 AI 评估提示词生成
- [ ] 学情报告批量创建
- [ ] 学情报告模板功能
- [ ] 知识点收藏功能

### 中期扩展（1-2月）
- [ ] 在线作业系统
- [ ] 代码在线评测（OJ）
- [ ] 题目标签系统
- [ ] 学习路径推荐
- [ ] 学生成绩统计报表

### 长期规划（3-6月）
- [ ] 多机构支持（SaaS 化）
- [ ] 移动端 App
- [ ] 在线答疑系统
- [ ] 直播课程集成
- [ ] AI 辅助教学

---

## 📞 技术支持

### 项目信息
- **项目名称**：OI 互动教学系统
- **技术栈**：React + NestJS + PostgreSQL
- **部署方式**：Docker Compose
- **版本**：V1.1
- **开发周期**：2025年1月（从0到1）

### 系统要求
- **Docker**：20.10+
- **Docker Compose**：2.0+
- **浏览器**：Chrome / Firefox / Safari（最新版本）
- **服务器**：2核4G 内存以上

### 访问地址
- **前端**：http://localhost
- **后端API**：http://localhost:3000
- **数据库**：localhost:5432

---

## ✅ 功能检查清单

### 用户系统
- [x] 用户注册与登录
- [x] 角色权限管理（5种角色）
- [x] 家长绑定学生
- [x] 个人资料管理

### 知识库
- [x] 知识点管理（入门组/提高组）
- [x] 题目管理
- [x] 视频资源上传
- [x] 知识点搜索

### 学习进度
- [x] 学生进度追踪
- [x] 学生练习看板
- [x] 家长查看孩子进度

### 学情报告 ⭐
- [x] 教师创建报告（含7个模块）
- [x] 报告草稿保存
- [x] 报告发送
- [x] 学生/家长查看报告
- [x] 雷达图和柱状图可视化
- [x] Markdown 评语渲染

### 竞赛日程
- [x] 日程列表展示
- [x] 日历视图展示
- [x] 事件详情弹窗
- [x] 日程增删改查（教师/管理员）

### 通知中心
- [x] 实时通知推送
- [x] 通知分类（绑定/报告/系统）
- [x] 交互式操作（接受/拒绝）
- [x] 未读标记和已读管理

### 可视化工具
- [x] 线段树可视化
- [x] 算法过程溯源

### 系统管理
- [x] 用户管理（批量创建）
- [x] 权限控制（RBAC）
- [x] 数据持久化
- [x] Docker 部署

---

## 🎉 总结

这是一个从 **0 到 1** 完整开发的 OI 教学系统，涵盖了：

✅ **8 大核心功能模块**  
✅ **9 个数据库表**  
✅ **20+ 个前端组件**  
✅ **完整的用户权限体系**  
✅ **现代化的 UI/UX 设计**  
✅ **数据可视化能力**  
✅ **Docker 容器化部署**  
✅ **前后端分离架构**  

系统功能完善，技术栈先进，用户体验优秀，已经可以投入实际使用！🚀

---

**文档生成时间**：2025年1月25日  
**系统版本**：V1.1  
**部署状态**：✅ 已上线运行
